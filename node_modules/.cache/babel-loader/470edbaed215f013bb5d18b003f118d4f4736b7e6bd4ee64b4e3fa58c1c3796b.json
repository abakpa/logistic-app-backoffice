{"ast":null,"code":"import { call, put, takeLatest } from 'redux-saga/effects';\nimport axios from 'axios';\nimport { loginRequest, loginSuccess, loginFailure, logoutRequest, logoutSuccess, logoutFailure } from '../slices/authSlice';\nfunction* loginSaga(action) {\n  const {\n    credentials,\n    navigate\n  } = action.payload;\n  try {\n    const response = yield call(axios.post, 'http://localhost:4000/api/login/admin', credentials);\n    const {\n      token,\n      admin\n    } = response.data;\n    localStorage.setItem('authToken', token);\n    localStorage.setItem('userId', user.id);\n    localStorage.setItem('userEmail', user.email);\n    yield put(loginSuccess(response.data));\n    navigate('/home');\n  } catch (error) {\n    yield put(loginFailure(error.message));\n  }\n}\nfunction* logoutSaga(action) {\n  const {\n    navigate\n  } = action.payload;\n  try {\n    // Clear user data from local storage\n    localStorage.removeItem('authToken');\n    localStorage.removeItem('userId');\n    localStorage.removeItem('userEmail');\n    navigate('/login');\n\n    // Dispatch logout success action\n    yield put(logoutSuccess());\n\n    // Navigate to login page\n  } catch (error) {\n    yield put(logoutFailure(error.message));\n  }\n}\nfunction* authSaga() {\n  yield takeLatest(loginRequest.type, loginSaga);\n  yield takeLatest(logoutRequest.type, logoutSaga);\n}\nexport default authSaga;","map":{"version":3,"names":["call","put","takeLatest","axios","loginRequest","loginSuccess","loginFailure","logoutRequest","logoutSuccess","logoutFailure","loginSaga","action","credentials","navigate","payload","response","post","token","admin","data","localStorage","setItem","user","id","email","error","message","logoutSaga","removeItem","authSaga","type"],"sources":["/Users/josephabakpa/Documents/CODES/LOGISTIC APP/back-office/src/redux/sagas/authSaga.js"],"sourcesContent":["import {call, put, takeLatest} from 'redux-saga/effects';\nimport axios from 'axios';\nimport {\n    loginRequest, \n    loginSuccess, \n    loginFailure,\n    logoutRequest,\n    logoutSuccess,\n    logoutFailure\n} from '../slices/authSlice';\n\nfunction* loginSaga(action){\n    const {credentials,navigate} = action.payload\n    try {\n        const response = yield call(axios.post,'http://localhost:4000/api/login/admin', credentials);\n        const { token,admin } = response.data;\n        localStorage.setItem('authToken', token);\n        localStorage.setItem('userId', user.id);\n        localStorage.setItem('userEmail', user.email);\n        yield put(loginSuccess(response.data))\n        navigate('/home')\n    } catch (error) {\n        yield put(loginFailure(error.message))\n    }\n}\nfunction* logoutSaga(action){\n    const { navigate } = action.payload;\n    try {\n        // Clear user data from local storage\n        localStorage.removeItem('authToken');\n        localStorage.removeItem('userId');\n        localStorage.removeItem('userEmail');\n        navigate('/login');\n\n        // Dispatch logout success action\n        yield put(logoutSuccess());\n\n        // Navigate to login page\n    } catch (error) {\n        yield put(logoutFailure(error.message));\n    }\n}\n\nfunction* authSaga(){\n    yield takeLatest(loginRequest.type, loginSaga)\n    yield takeLatest(logoutRequest.type, logoutSaga)\n}\n\nexport default authSaga;"],"mappings":"AAAA,SAAQA,IAAI,EAAEC,GAAG,EAAEC,UAAU,QAAO,oBAAoB;AACxD,OAAOC,KAAK,MAAM,OAAO;AACzB,SACIC,YAAY,EACZC,YAAY,EACZC,YAAY,EACZC,aAAa,EACbC,aAAa,EACbC,aAAa,QACV,qBAAqB;AAE5B,UAAUC,SAASA,CAACC,MAAM,EAAC;EACvB,MAAM;IAACC,WAAW;IAACC;EAAQ,CAAC,GAAGF,MAAM,CAACG,OAAO;EAC7C,IAAI;IACA,MAAMC,QAAQ,GAAG,MAAMf,IAAI,CAACG,KAAK,CAACa,IAAI,EAAC,uCAAuC,EAAEJ,WAAW,CAAC;IAC5F,MAAM;MAAEK,KAAK;MAACC;IAAM,CAAC,GAAGH,QAAQ,CAACI,IAAI;IACrCC,YAAY,CAACC,OAAO,CAAC,WAAW,EAAEJ,KAAK,CAAC;IACxCG,YAAY,CAACC,OAAO,CAAC,QAAQ,EAAEC,IAAI,CAACC,EAAE,CAAC;IACvCH,YAAY,CAACC,OAAO,CAAC,WAAW,EAAEC,IAAI,CAACE,KAAK,CAAC;IAC7C,MAAMvB,GAAG,CAACI,YAAY,CAACU,QAAQ,CAACI,IAAI,CAAC,CAAC;IACtCN,QAAQ,CAAC,OAAO,CAAC;EACrB,CAAC,CAAC,OAAOY,KAAK,EAAE;IACZ,MAAMxB,GAAG,CAACK,YAAY,CAACmB,KAAK,CAACC,OAAO,CAAC,CAAC;EAC1C;AACJ;AACA,UAAUC,UAAUA,CAAChB,MAAM,EAAC;EACxB,MAAM;IAAEE;EAAS,CAAC,GAAGF,MAAM,CAACG,OAAO;EACnC,IAAI;IACA;IACAM,YAAY,CAACQ,UAAU,CAAC,WAAW,CAAC;IACpCR,YAAY,CAACQ,UAAU,CAAC,QAAQ,CAAC;IACjCR,YAAY,CAACQ,UAAU,CAAC,WAAW,CAAC;IACpCf,QAAQ,CAAC,QAAQ,CAAC;;IAElB;IACA,MAAMZ,GAAG,CAACO,aAAa,CAAC,CAAC,CAAC;;IAE1B;EACJ,CAAC,CAAC,OAAOiB,KAAK,EAAE;IACZ,MAAMxB,GAAG,CAACQ,aAAa,CAACgB,KAAK,CAACC,OAAO,CAAC,CAAC;EAC3C;AACJ;AAEA,UAAUG,QAAQA,CAAA,EAAE;EAChB,MAAM3B,UAAU,CAACE,YAAY,CAAC0B,IAAI,EAAEpB,SAAS,CAAC;EAC9C,MAAMR,UAAU,CAACK,aAAa,CAACuB,IAAI,EAAEH,UAAU,CAAC;AACpD;AAEA,eAAeE,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}