{"ast":null,"code":"import { call, put, takeLatest } from 'redux-saga/effects';\nimport axios from 'axios';\nimport { fetchOrderRequest, fetchOrderSuccess, fetchOrderFailure, fetchDriverOrderSuccess, fetchDriverOrderFailure, createOrderRequest, createOrderSuccess, createOrderFailure } from '../slices/orderSlice';\nfunction* fetchOrderSaga() {\n  try {\n    const response = yield call(axios.get, 'http://localhost:4000/api/orders');\n    yield put(fetchOrderSuccess(response.data));\n  } catch (error) {\n    yield put(fetchOrderFailure(error.response.data.message));\n  }\n}\nfunction* fetchDriverOrderSaga() {\n  try {\n    const response = yield call(axios.get, 'http://localhost:4000/api/orders/orderbydriver');\n    yield put(fetchDriverOrderSuccess(response.data));\n  } catch (error) {\n    yield put(fetchDriverOrderFailure(error.response.data.message));\n  }\n}\nfunction* createOrderSaga(action) {\n  const {\n    details,\n    navigate\n  } = action.payload;\n  try {\n    const token = localStorage.getItem('authToken');\n    const config = {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    };\n    const response = yield call(axios.post, 'http://localhost:4000/api/orders/dispatch', details, config);\n    yield put(createOrderSuccess(response.data));\n    navigate('/Order');\n  } catch (error) {\n    yield put(createOrderFailure(error.response.data.message));\n  }\n}\nfunction* orderSaga() {\n  yield takeLatest(fetchOrderRequest.type, fetchOrderSaga);\n  yield takeLatest(fetchOrderRequest.type, fetchDriverOrderSaga);\n  yield takeLatest(createOrderRequest.type, createOrderSaga);\n}\nexport default orderSaga;","map":{"version":3,"names":["call","put","takeLatest","axios","fetchOrderRequest","fetchOrderSuccess","fetchOrderFailure","fetchDriverOrderSuccess","fetchDriverOrderFailure","createOrderRequest","createOrderSuccess","createOrderFailure","fetchOrderSaga","response","get","data","error","message","fetchDriverOrderSaga","createOrderSaga","action","details","navigate","payload","token","localStorage","getItem","config","headers","Authorization","post","orderSaga","type"],"sources":["/Users/josephabakpa/Documents/CODES/LOGISTIC APP/front-end/src/redux/sagas/orderSaga.js"],"sourcesContent":["import {call, put, takeLatest} from 'redux-saga/effects'\nimport axios from 'axios'\nimport {fetchOrderRequest,fetchOrderSuccess,fetchOrderFailure,fetchDriverOrderSuccess,fetchDriverOrderFailure,createOrderRequest,createOrderSuccess,createOrderFailure} from '../slices/orderSlice'\n\n function* fetchOrderSaga(){\n    try {\n    \n        const response = yield call(axios.get, 'http://localhost:4000/api/orders')\n        yield put(fetchOrderSuccess(response.data))\n    } catch (error) {\n        yield put(fetchOrderFailure(error.response.data.message))\n    }\n}\n function* fetchDriverOrderSaga(){\n    try {\n    \n        const response = yield call(axios.get, 'http://localhost:4000/api/orders/orderbydriver')\n        yield put(fetchDriverOrderSuccess(response.data))\n    } catch (error) {\n        yield put(fetchDriverOrderFailure(error.response.data.message))\n    }\n}\nfunction* createOrderSaga(action){\n    const {details,navigate} = action.payload\n    try {\n      \n        const token = localStorage.getItem('authToken');\n        const config = {\n            headers: {\n                Authorization: `Bearer ${token}`\n            }\n        }\n        const response = yield call(axios.post,'http://localhost:4000/api/orders/dispatch', details,config);\n        yield put(createOrderSuccess(response.data))\n        navigate('/Order')\n    } catch (error) {\n        yield put(createOrderFailure(error.response.data.message))\n    }\n}\n\nfunction* orderSaga(){\n    yield takeLatest(fetchOrderRequest.type, fetchOrderSaga)\n    yield takeLatest(fetchOrderRequest.type, fetchDriverOrderSaga)\n    yield takeLatest(createOrderRequest.type, createOrderSaga)\n}\n\nexport default orderSaga"],"mappings":"AAAA,SAAQA,IAAI,EAAEC,GAAG,EAAEC,UAAU,QAAO,oBAAoB;AACxD,OAAOC,KAAK,MAAM,OAAO;AACzB,SAAQC,iBAAiB,EAACC,iBAAiB,EAACC,iBAAiB,EAACC,uBAAuB,EAACC,uBAAuB,EAACC,kBAAkB,EAACC,kBAAkB,EAACC,kBAAkB,QAAO,sBAAsB;AAElM,UAAUC,cAAcA,CAAA,EAAE;EACvB,IAAI;IAEA,MAAMC,QAAQ,GAAG,MAAMb,IAAI,CAACG,KAAK,CAACW,GAAG,EAAE,kCAAkC,CAAC;IAC1E,MAAMb,GAAG,CAACI,iBAAiB,CAACQ,QAAQ,CAACE,IAAI,CAAC,CAAC;EAC/C,CAAC,CAAC,OAAOC,KAAK,EAAE;IACZ,MAAMf,GAAG,CAACK,iBAAiB,CAACU,KAAK,CAACH,QAAQ,CAACE,IAAI,CAACE,OAAO,CAAC,CAAC;EAC7D;AACJ;AACC,UAAUC,oBAAoBA,CAAA,EAAE;EAC7B,IAAI;IAEA,MAAML,QAAQ,GAAG,MAAMb,IAAI,CAACG,KAAK,CAACW,GAAG,EAAE,gDAAgD,CAAC;IACxF,MAAMb,GAAG,CAACM,uBAAuB,CAACM,QAAQ,CAACE,IAAI,CAAC,CAAC;EACrD,CAAC,CAAC,OAAOC,KAAK,EAAE;IACZ,MAAMf,GAAG,CAACO,uBAAuB,CAACQ,KAAK,CAACH,QAAQ,CAACE,IAAI,CAACE,OAAO,CAAC,CAAC;EACnE;AACJ;AACA,UAAUE,eAAeA,CAACC,MAAM,EAAC;EAC7B,MAAM;IAACC,OAAO;IAACC;EAAQ,CAAC,GAAGF,MAAM,CAACG,OAAO;EACzC,IAAI;IAEA,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC;IAC/C,MAAMC,MAAM,GAAG;MACXC,OAAO,EAAE;QACLC,aAAa,EAAE,UAAUL,KAAK;MAClC;IACJ,CAAC;IACD,MAAMX,QAAQ,GAAG,MAAMb,IAAI,CAACG,KAAK,CAAC2B,IAAI,EAAC,2CAA2C,EAAET,OAAO,EAACM,MAAM,CAAC;IACnG,MAAM1B,GAAG,CAACS,kBAAkB,CAACG,QAAQ,CAACE,IAAI,CAAC,CAAC;IAC5CO,QAAQ,CAAC,QAAQ,CAAC;EACtB,CAAC,CAAC,OAAON,KAAK,EAAE;IACZ,MAAMf,GAAG,CAACU,kBAAkB,CAACK,KAAK,CAACH,QAAQ,CAACE,IAAI,CAACE,OAAO,CAAC,CAAC;EAC9D;AACJ;AAEA,UAAUc,SAASA,CAAA,EAAE;EACjB,MAAM7B,UAAU,CAACE,iBAAiB,CAAC4B,IAAI,EAAEpB,cAAc,CAAC;EACxD,MAAMV,UAAU,CAACE,iBAAiB,CAAC4B,IAAI,EAAEd,oBAAoB,CAAC;EAC9D,MAAMhB,UAAU,CAACO,kBAAkB,CAACuB,IAAI,EAAEb,eAAe,CAAC;AAC9D;AAEA,eAAeY,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}