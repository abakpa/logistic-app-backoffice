{"ast":null,"code":"import { call, put, takeLatest } from 'redux-saga/effects';\nimport axios from 'axios';\nimport { fetchDispatchRequest, fetchDispatchSuccess, fetchDispatchFailure, fetchActiveDispatchRequest, fetchActiveDispatchSuccess, fetchActiveDispatchFailure, fetchDispatchByDriverRequest, fetchDispatchByDriverSuccess, fetchDispatchByDriverFailure, createDispatchByDriverRequest, createDispatchByDriverSuccess, createDispatchByDriverFailure, createDispatchRequest, createDispatchSuccess, createDispatchFailure } from '../slices/dispatchSlice';\nimport io from 'socket.io-client';\nimport { fetchNotificationSuccess } from '../slices/notification';\nconst socket = io.connect('http://localhost:4000');\nfunction* fetchDispatchSaga() {\n  try {\n    const response = yield call(axios.get, 'http://localhost:4000/api/dispatch');\n    yield put(fetchDispatchSuccess(response.data));\n  } catch (error) {\n    yield put(fetchDispatchFailure(error.response.data.message));\n  }\n}\nfunction* fetchActiveDispatchSaga() {\n  try {\n    const response = yield call(axios.get, 'http://localhost:4000/api/dispatch/active');\n    yield put(fetchActiveDispatchSuccess(response.data));\n  } catch (error) {\n    yield put(fetchActiveDispatchFailure(error.response.data.message));\n  }\n}\nfunction* fetchDispatchByDriverSaga() {\n  // const {orderId,navigate} = action.payload\n  // const {orderId} = action.payload\n  try {\n    const token = localStorage.getItem('authToken');\n    const config = {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    };\n    const response = yield call(axios.get, 'http://localhost:4000/api/dispatch/driver', config);\n    yield put(fetchDispatchByDriverSuccess(response.data));\n    // navigate('/OrderByDriver')\n  } catch (error) {\n    yield put(fetchDispatchByDriverFailure(error.response.data.message));\n  }\n}\nfunction* createDispatchByDriverSaga(action) {\n  const {\n    orderId,\n    navigate\n  } = action.payload;\n  try {\n    const token = localStorage.getItem('authToken');\n    const config = {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    };\n    const response = yield call(axios.put, `http://localhost:4000/api/orders/dispatch/${orderId}`, {}, config);\n    console.log('response 1', response.data);\n    yield put(fetchNotificationSuccess(response.dtat));\n    if (response.data.status) {\n      socket.emit('send_message', {\n        message: response.data.status\n      });\n    }\n    yield put(createDispatchByDriverSuccess(response.data));\n    if (response.data._id) {\n      navigate('/OrderByDriver');\n    }\n  } catch (error) {\n    yield put(createDispatchByDriverFailure(error.response.data.message));\n  }\n}\nfunction* createDispatchSaga(action) {\n  // const {orderId,navigate} = action.payload\n  const {\n    orderId\n  } = action.payload;\n  try {\n    const token = localStorage.getItem('authToken');\n    const config = {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    };\n    const response = yield call(axios.put, `http://localhost:4000/api/dispatch/status/${orderId}`, {}, config);\n    yield put(createDispatchSuccess(response.data));\n    // navigate('/OrderByDriver')\n  } catch (error) {\n    yield put(createDispatchFailure(error.response.data.message));\n  }\n}\nfunction* dispatchSaga() {\n  yield takeLatest(fetchDispatchRequest.type, fetchDispatchSaga);\n  yield takeLatest(fetchActiveDispatchRequest.type, fetchActiveDispatchSaga);\n  yield takeLatest(fetchDispatchByDriverRequest.type, fetchDispatchByDriverSaga);\n  yield takeLatest(createDispatchRequest.type, createDispatchSaga);\n  yield takeLatest(createDispatchByDriverRequest.type, createDispatchByDriverSaga);\n}\nexport default dispatchSaga;","map":{"version":3,"names":["call","put","takeLatest","axios","fetchDispatchRequest","fetchDispatchSuccess","fetchDispatchFailure","fetchActiveDispatchRequest","fetchActiveDispatchSuccess","fetchActiveDispatchFailure","fetchDispatchByDriverRequest","fetchDispatchByDriverSuccess","fetchDispatchByDriverFailure","createDispatchByDriverRequest","createDispatchByDriverSuccess","createDispatchByDriverFailure","createDispatchRequest","createDispatchSuccess","createDispatchFailure","io","fetchNotificationSuccess","socket","connect","fetchDispatchSaga","response","get","data","error","message","fetchActiveDispatchSaga","fetchDispatchByDriverSaga","token","localStorage","getItem","config","headers","Authorization","createDispatchByDriverSaga","action","orderId","navigate","payload","console","log","dtat","status","emit","_id","createDispatchSaga","dispatchSaga","type"],"sources":["/Users/josephabakpa/Documents/CODES/LOGISTIC APP/back-office/src/redux/sagas/dispatchSaga.js"],"sourcesContent":["import {call, put, takeLatest} from 'redux-saga/effects'\nimport axios from 'axios'\n\nimport {\n    fetchDispatchRequest,\n    fetchDispatchSuccess,\n    fetchDispatchFailure,\n    fetchActiveDispatchRequest,\n    fetchActiveDispatchSuccess,\n    fetchActiveDispatchFailure,\n    fetchDispatchByDriverRequest,\n    fetchDispatchByDriverSuccess,\n    fetchDispatchByDriverFailure,\n    createDispatchByDriverRequest,\n    createDispatchByDriverSuccess,\n    createDispatchByDriverFailure,\n    createDispatchRequest,\n    createDispatchSuccess,\n    createDispatchFailure\n} from '../slices/dispatchSlice'\nimport io from 'socket.io-client'\nimport { fetchNotificationSuccess } from '../slices/notification'\nconst socket = io.connect('http://localhost:4000')\n\n function* fetchDispatchSaga(){\n    try {\n       \n        const response = yield call(axios.get, 'http://localhost:4000/api/dispatch')\n        yield put(fetchDispatchSuccess(response.data))\n    } catch (error) {\n        yield put(fetchDispatchFailure(error.response.data.message))\n    }\n}\n function* fetchActiveDispatchSaga(){\n    try {\n       \n        const response = yield call(axios.get, 'http://localhost:4000/api/dispatch/active')\n        yield put(fetchActiveDispatchSuccess(response.data))\n    } catch (error) {\n        yield put(fetchActiveDispatchFailure(error.response.data.message))\n    }\n}\nfunction* fetchDispatchByDriverSaga(){\n    // const {orderId,navigate} = action.payload\n    // const {orderId} = action.payload\n    try {\n      \n        const token = localStorage.getItem('authToken');\n        const config = {\n            headers: {\n                Authorization: `Bearer ${token}`\n            }\n        }\n        const response = yield call(axios.get,'http://localhost:4000/api/dispatch/driver',config);\n        yield put(fetchDispatchByDriverSuccess(response.data))\n        // navigate('/OrderByDriver')\n    } catch (error) {\n        yield put(fetchDispatchByDriverFailure(error.response.data.message))\n    }\n}\nfunction* createDispatchByDriverSaga(action){\n    const {orderId,navigate} = action.payload\n    try {\n      \n        const token = localStorage.getItem('authToken');\n        const config = {\n            headers: {\n                Authorization: `Bearer ${token}`\n            }\n        }\n        const response = yield call(axios.put,`http://localhost:4000/api/orders/dispatch/${orderId}`,{},config);\n        console.log('response 1',response.data)\n        yield put(fetchNotificationSuccess(response.dtat))\n        if(response.data.status){\n        socket.emit('send_message',{message:response.data.status})\n        }\n        yield put(createDispatchByDriverSuccess(response.data))\n        if(response.data._id){\n        navigate('/OrderByDriver')\n        }\n    } catch (error) {\n        yield put(createDispatchByDriverFailure(error.response.data.message))\n    }\n}\nfunction* createDispatchSaga(action){\n    // const {orderId,navigate} = action.payload\n    const {orderId} = action.payload\n    try {\n      \n        const token = localStorage.getItem('authToken');\n        const config = {\n            headers: {\n                Authorization: `Bearer ${token}`\n            }\n        }\n        const response = yield call(axios.put,`http://localhost:4000/api/dispatch/status/${orderId}`,{},config);\n        yield put(createDispatchSuccess(response.data))\n        // navigate('/OrderByDriver')\n    } catch (error) {\n        yield put(createDispatchFailure(error.response.data.message))\n    }\n}\n\nfunction* dispatchSaga(){\n    yield takeLatest(fetchDispatchRequest.type, fetchDispatchSaga)\n    yield takeLatest(fetchActiveDispatchRequest.type, fetchActiveDispatchSaga)\n    yield takeLatest(fetchDispatchByDriverRequest.type, fetchDispatchByDriverSaga)\n    yield takeLatest(createDispatchRequest.type, createDispatchSaga)\n    yield takeLatest(createDispatchByDriverRequest.type, createDispatchByDriverSaga)\n}\n\nexport default dispatchSaga"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}